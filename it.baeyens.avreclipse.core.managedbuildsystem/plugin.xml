<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.3"?>
<plugin>


<!--
####################################################################################### 
#    ScannerConfigurationDiscoveryProfiles                                            # 
####################################################################################### 
-->
	<!-- C Projects -->
	<extension point="org.eclipse.cdt.make.core.ScannerConfigurationDiscoveryProfile"
		id="it.baeyens.avreclipse.core.AVRGCCManagedMakePerProjectProfileC"
		name="AVR-GCC managed project profile (C)">
		<scannerInfoCollector
            class="it.baeyens.avreclipse.mbs.scannerconfig.AVRGCCScannerInfoCollector"
            scope="project"/>
		<buildOutputProvider>
			<open/>
			<scannerInfoConsoleParser 
				class="it.baeyens.avreclipse.mbs.scannerconfig.AVRGCCScannerInfoConsoleParser"
				compilerCommands="avr-gcc,avr-g++" />
		</buildOutputProvider>
		<scannerInfoProvider providerId="specsFile">
			<run
				arguments="-E -P -v -dD ${plugin_state_location}/specs.c"
				command="avr-gcc"
				class="org.eclipse.cdt.make.internal.core.scannerconfig2.GCCSpecsRunSIProvider"/>
			<scannerInfoConsoleParser 
				class="org.eclipse.cdt.make.internal.core.scannerconfig.gnu.GCCSpecsConsoleParser"/>
		</scannerInfoProvider>
	</extension>

	<!-- C++ Projects -->
	<extension point="org.eclipse.cdt.make.core.ScannerConfigurationDiscoveryProfile"
		id="it.baeyens.avreclipse.core.AVRGCCManagedMakePerProjectProfileCPP"
		name="AVR-GCC managed project profile (C++)">
		<scannerInfoCollector
            class="it.baeyens.avreclipse.mbs.scannerconfig.AVRGCCScannerInfoCollector"
            scope="project"/>
		<buildOutputProvider>
			<open/>
			<scannerInfoConsoleParser class="it.baeyens.avreclipse.mbs.scannerconfig.AVRGCCScannerInfoConsoleParser"/>
		</buildOutputProvider>
		<scannerInfoProvider providerId="specsFile">
			<run
				arguments="-E -P -v -dD ${plugin_state_location}/specs.cpp"
				command="avr-g++"
				class="org.eclipse.cdt.make.internal.core.scannerconfig2.GCCSpecsRunSIProvider"/>
			<scannerInfoConsoleParser class="org.eclipse.cdt.make.internal.core.scannerconfig.gnu.GCCSpecsConsoleParser"/>
		</scannerInfoProvider>
	</extension>
 

<!-- 
####################################################################################### 
####################################################################################### 
##                                                                                   ##
##   BuildDef                                                                        ##
##                                                                                   ## 
####################################################################################### 
####################################################################################### 
-->
 
	<extension id="it.baeyens.avreclipse.builddef"
        point="org.eclipse.cdt.managedbuilder.core.buildDefinitions"
		name="AVR Build Definitions test" >
		<managedBuildRevision fileVersion="4.0.0" />
		
<!-- 
####################################################################################### 
#    winAVR Assembler                                                                 # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.assembler.winavr"
			command="avr-gcc" 
			name="AVR Assembler" 
			outputFlag="-c -o"
			errorParsers="org.eclipse.cdt.core.GASErrorParser">
			
			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildType">
					<value
						id="org.eclipse.cdt.build.core.buildType.debug" />
					<value
						id="org.eclipse.cdt.build.core.buildType.release" />
				</property>
			</supportedProperties>

			<optionCategory owner="it.baeyens.avreclipse.tool.assembler.winavr"
				name="General" id="it.baeyens.avreclipse.asm.category.general" />
			<option id="it.baeyens.avreclipse.asm.option.usecpp"
				name="Use preprocessor"
				category="it.baeyens.avreclipse.asm.category.general"
				valueType="boolean"
				defaultValue="true"
				command="-x assembler-with-cpp"
				commandFalse="-x assembler" />
			<option id="it.baeyens.avreclipse.asm.option.warnings.nowarn"
				name="Suppress warnings (-W)"
				category="it.baeyens.avreclipse.asm.category.general"
				valueType="boolean" 
				defaultValue="false"
				command="-W" />
			<option id="it.baeyens.avreclipse.assembler.option.xflags"
				name="(-Xassembler) options"
				category="it.baeyens.avreclipse.asm.category.general"
				valueType="stringList"
				command="-Xassembler" />
			<option id="it.baeyens.avreclipse.asm.option.flags"
				name="Other GCC Flags"
				category="it.baeyens.avreclipse.asm.category.general" 
				valueType="string"  />

	<!--	Bug 2485661: added a new option to select the assembler include path -->
	<!--	'-I' only works for the preprocessor, so an '-Wa,-I' option has been added -->
			<optionCategory id="it.baeyens.avreclipse.asm.category.paths" 
				name="Paths" />
			<option id="it.baeyens.avreclipse.asm.option.include.paths"
				name="#include paths for preprocessor(-I)"
				category="it.baeyens.avreclipse.asm.category.paths" 
				valueType="includePath"
				browseType="directory"
				command="-I" />
			<option id="it.baeyens.avreclipse.asm.option.include.gaspaths"
				name=".include paths for assembler(-Wa,-I)"
				category="it.baeyens.avreclipse.asm.category.paths" 
				valueType="includePath"
				browseType="directory"
				command="-Wa,-I" />

			<optionCategory id="it.baeyens.avreclipse.assembler.category.debug" 
				name="Debugging" />
			<option id="it.baeyens.avreclipse.assembler.option.debug.level"
				name="Generate Debugging Info" 
				category="it.baeyens.avreclipse.assembler.category.debug"
				valueType="enumerated" >
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="it.baeyens.avreclipse.assembler.option.debug.level.none"
					extensionAdjustment="false" >
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.release" />
				</enablement>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="it.baeyens.avreclipse.assembler.option.debug.level.g2"
					extensionAdjustment="false" >
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.debug" />
				</enablement>
			    <enumeratedOptionValue
			    	  command=""
			          id="it.baeyens.avreclipse.assembler.option.debug.level.none"
			          name="No debugging info" />
			    <enumeratedOptionValue
			          command="-g1"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.g1"
			          name="Minimal debugging info (-g1)" />
			    <enumeratedOptionValue
			          command="-g2"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.g2"
			          isDefault="true"
			          name="Standard debugging info (-g2)" />
			    <enumeratedOptionValue
			          command="-g3"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.g3"
			          name="Extra debugging info (-g3)" />
			</option>
			<option id="it.baeyens.avreclipse.assembler.option.debug.type"
				name="Debug Info Format" 
				category="it.baeyens.avreclipse.assembler.category.debug"
				valueType="enumerated" >
			    <enumeratedOptionValue
			    	  isDefault="true"
			    	  command="-gstabs"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.stabs"
			          name="stabs (Fully supported format)" />
			    <enumeratedOptionValue
			          command="-gdwarf-2"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.dwarf-2"
			          name="dwarf-2 (Experimental)" />
			    <enumeratedOptionValue
			          command="-ggdb"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.gdb"
			          name="gdb (for most gdb based debuggers)" />
			    <enumeratedOptionValue
			    	  command="-gstabs+"
			          id="it.baeyens.avreclipse.assembler.option.debug.level.stabsplus"
			          name="stabs+ (stabs + gdb extensions)" />
			    <enumeratedOptionValue
			          command=""
			          id="it.baeyens.avreclipse.assembler.option.debug.level.default"
			          name="Operating System Default" />
				<enablement 
					type="UI_ENABLEMENT|CMD_USAGE" >
					<not>
						<checkOption
							optionId="it.baeyens.avreclipse.assembler.option.debug.level"
					  		value="it.baeyens.avreclipse.assembler.option.debug.level.none" />
					</not>
				</enablement>
			</option>
			
				
			<option id="it.baeyens.avreclipse.asm.option.targetmcu"
				name="MCU Type"
				valueType="string"
				defaultValue="${AVRTARGETMCU}"
				command="-mmcu=" >
			</option>
			
			
			<inputType id="it.baeyens.avreclipse.tool.assembler.input"
				sources="s,S,asm"
				dependencyContentType="org.eclipse.cdt.core.cHeader"
				dependencyExtensions="h"
				dependencyCalculator="org.eclipse.cdt.managedbuilder.makegen.gnu.DefaultGCCDependencyCalculator2" />
				
			<outputType id="it.baeyens.avreclipse.tool.assembler.output"
				outputs="o" 
				buildVariable="OBJS" />
		</tool>

<!-- 
####################################################################################### 
#    AVR-GCC Compiler                                                                  # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.compiler.winavr" 
			name="AVR Compiler" 
			command="avr-gcc"
			errorParsers="org.eclipse.cdt.core.GCCErrorParser"
			outputFlag="-c -o"
			natureFilter="both" >
			
			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildType">
					<value
						id="org.eclipse.cdt.build.core.buildType.debug" />
					<value
						id="org.eclipse.cdt.build.core.buildType.release" />
				</property>
			</supportedProperties>

			<envVarBuildPath 
				pathType="buildpathInclude"
				variableList="CPATH,C_INCLUDE_PATH" />
			
			<optionCategory	id="it.baeyens.avreclipse.compiler.category.directories" 
				name="Directories" />
			<option id="it.baeyens.avreclipse.compiler.option.incpath"
				name="Include Paths (-I)" 
				category="it.baeyens.avreclipse.compiler.category.directories"
				valueType="includePath"
				browseType="directory"
				command="-I" />

			<optionCategory id="it.baeyens.avreclipse.compiler.category.syms"
				name="Symbols" >
			</optionCategory>
			<option id="it.baeyens.avreclipse.compiler.option.omitfcpu"
				name="Omit F_CPU" 
				category="it.baeyens.avreclipse.compiler.category.syms"
				valueType="boolean"
				defaultValue="false" 
				tip="Select if F_CPU is already defined in the source" />
			<option id="it.baeyens.avreclipse.compiler.option.def"
				name="Define Syms (-D)" 
				category="it.baeyens.avreclipse.compiler.category.syms"
				valueType="definedSymbols"
				command="-D" />
			<option id="it.baeyens.avreclipse.compiler.option.undef"
				name="Undefine Syms (-U)"
				category="it.baeyens.avreclipse.compiler.category.syms"
				valueType="undefDefinedSymbols"
				command="-U" />

			<optionCategory id="it.baeyens.avreclipse.compiler.category.warnings"
				name="Warnings" />
			<option id="it.baeyens.avreclipse.compiler.option.nowarn" 
				name="No Warnings (-w)" 
				category="it.baeyens.avreclipse.compiler.category.warnings"
				valueType="boolean"
				defaultValue="false"
				command="-w" />
			<option id="it.baeyens.avreclipse.compiler.option.allwarn" 
				name="All Warnings (-Wall)"
				category="it.baeyens.avreclipse.compiler.category.warnings"
				valueType="boolean"
				defaultValue="true"
				command="-Wall" />
			<option id="it.baeyens.avreclipse.compiler.option.warnerr" 
				name="Warnings as Errors (-Werror)"
				category="it.baeyens.avreclipse.compiler.category.warnings"
				valueType="boolean"
				defaultValue="false"
				command="-Werror" />
				
			<optionCategory id="it.baeyens.avreclipse.compiler.category.debug" 
				name="Debugging" />
			<option id="it.baeyens.avreclipse.compiler.option.debug.level"
				name="Generate Debugging Info" 
				category="it.baeyens.avreclipse.compiler.category.debug"
				valueType="enumerated" >
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="it.baeyens.avreclipse.compiler.option.debug.level.none"
					extensionAdjustment="false" >
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.release" />
				</enablement>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="it.baeyens.avreclipse.compiler.option.debug.level.g2"
					extensionAdjustment="false" >
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.debug" />
				</enablement>
			    <enumeratedOptionValue
			    	  command=""
			          id="it.baeyens.avreclipse.compiler.option.debug.level.none"
			          name="No debugging info" />
			    <enumeratedOptionValue
			          command="-g1"
			          id="it.baeyens.avreclipse.compiler.option.debug.level.g1"
			          name="Minimal debugging info (-g1)" />
			    <enumeratedOptionValue
			          command="-g2"
			          id="it.baeyens.avreclipse.compiler.option.debug.level.g2"
			          isDefault="true"
			          name="Standard debugging info (-g2)" />
			    <enumeratedOptionValue
			          command="-g3"
			          id="it.baeyens.avreclipse.compiler.option.debug.level.g3"
			          name="Extra debugging info (-g3)" />
			</option>
			<option id="it.baeyens.avreclipse.compiler.option.debug.type"
				name="Debug Info Format" 
				category="it.baeyens.avreclipse.compiler.category.debug"
				valueType="enumerated" >
			    <enumeratedOptionValue
			    	  isDefault="true"
			    	  command="-gstabs"
			          id="it.baeyens.avreclipse.compiler.option.debug.level.stabs"
			          name="stabs (avr-gdb / Insight)" />
			    <enumeratedOptionValue
			          command="-gdwarf-2"
			          id="it.baeyens.avreclipse.compiler.option.debug.level.dwarf-2"
			          name="dwarf-2 (AVR Studio 4.11+ Debugger)" />
			    <enumeratedOptionValue
			    	  command="-gstabs+"
			          id="it.baeyens.avreclipse.compiler.option.debug.level.stabsplus"
			          name="stabs+ (stabs + gdb extensions)" />
			    <enumeratedOptionValue
			          command=""
			          id="it.baeyens.avreclipse.compiler.option.debug.level.default"
			          name="Operating System Default" />
				<enablement 
					type="UI_ENABLEMENT|CMD_USAGE" >
					<not>
						<checkOption
							optionId="it.baeyens.avreclipse.compiler.option.debug.level"
					  		value="it.baeyens.avreclipse.compiler.option.debug.level.none" />
					</not>
				</enablement>
			</option>
			
			<optionCategory
				id="it.baeyens.avreclipse.compiler.category.optimization"
				name="Optimization" />
			<option id="it.baeyens.avreclipse.compiler.option.optimize"
				name="Optimization Level"
				category="it.baeyens.avreclipse.compiler.category.optimization"
				valueType="enumerated" >
				<enumeratedOptionValue command="-O0"
					name="No Optimizations (-O0)"
					id="it.baeyens.avreclipse.compiler.optimize.none" />
				<enumeratedOptionValue command="-O1"
					name="Slight Optimizations (-O1)"
					id="it.baeyens.avreclipse.compiler.optimize.one" />
				<enumeratedOptionValue command="-O2"
					name="Moderate Optimizations (-O2)"
					id="it.baeyens.avreclipse.compiler.optimize.two" />
				<enumeratedOptionValue command="-O3"
					name="Heavy Optimizations (-O3)"
					id="it.baeyens.avreclipse.compiler.optimize.three" />
				<enumeratedOptionValue command="-Os"
					id="it.baeyens.avreclipse.compiler.optimize.size"
					name="Size Optimizations (-Os)">
				</enumeratedOptionValue>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value" 
					value="it.baeyens.avreclipse.compiler.optimize.size"
					extensionAdjustment="false">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.release" />
				</enablement>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value" 
					value="it.baeyens.avreclipse.compiler.optimize.none"
					extensionAdjustment="false">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.debug" />
				</enablement>
			</option>
			<option id="it.baeyens.avreclipse.compiler.option.optimize.packstruct"
				name="Pack structs (-fpack-struct)"
				category="it.baeyens.avreclipse.compiler.category.optimization"
				command="-fpack-struct"
				valueType="boolean"
				defaultValue="true" />
			<option id="it.baeyens.avreclipse.compiler.option.optimize.shortenums"
				name="Short enums (-fshort-enums)"
				category="it.baeyens.avreclipse.compiler.category.optimization"
				command="-fshort-enums"
				valueType="boolean"
				defaultValue="true" />
			<option id="it.baeyens.avreclipse.compiler.option.optimize.other"
				name="Other Optimization Flags"
				category="it.baeyens.avreclipse.compiler.category.optimization"
				valueType="string" />

			
			<optionCategory id="it.baeyens.avreclipse.compiler.category.language"
				name="Language Standard" />
			<option id="it.baeyens.avreclipse.compiler.option.std"
				name="Language Standard"
				category="it.baeyens.avreclipse.compiler.category.language"
				valueType="enumerated" >
				<enumeratedOptionValue command=""
					id="it.baeyens.avreclipse.compiler.option.std.default"
					name="Compiler Default (ISO C90 + GNU extensions)" />
				<enumeratedOptionValue command="-ansi"
					id="it.baeyens.avreclipse.compiler.option.std.c90"
					name="ISO C90 (-ansi)" />
				<enumeratedOptionValue command="-std=c99"
					id="it.baeyens.avreclipse.compiler.option.std.c99"
					name="ISO C99 (-std=c99)" />
				<enumeratedOptionValue command="-std=gnu99"
					id="it.baeyens.avreclipse.compiler.option.std.gnu99"
					name="ISO C99 + GNU Extensions (-std=gnu99)"
					isDefault="true" />
			</option>
			<option id="it.baeyens.avreclipse.compiler.option.language.uchar"
				name="char is unsigned (-funsigned-char)"
				category="it.baeyens.avreclipse.compiler.category.language"
				command="-funsigned-char"
				valueType="boolean"
				defaultValue="true"	/>
			<option id="it.baeyens.avreclipse.compiler.option.language.ubitfields"
				name="bitfields are unsigned (-funsigned-bitfields)"
				category="it.baeyens.avreclipse.compiler.category.language"
				command="-funsigned-bitfields"
				valueType="boolean"
				defaultValue="true"	/>

			<optionCategory id="it.baeyens.avreclipse.compiler.category.misc"
				name="Miscellaneous" />
			<option id="it.baeyens.avreclipse.compiler.option.verbose"
				name="Verbose (-v)" 
				category="it.baeyens.avreclipse.compiler.category.misc"
				valueType="boolean" 
				defaultValue="false"
				command="-v" />
			<option id="it.baeyens.avreclipse.compiler.option.otherflags"
				name="Other flags"
				category="it.baeyens.avreclipse.compiler.category.misc" 
				valueType="string"
				defaultValue="" />
				
			<option id="it.baeyens.avreclipse.compiler.option.targetmcu"
				name="MCU Type"
				valueType="string"
				defaultValue="${AVRTARGETMCU}"
				command="-mmcu=" >
			</option>
			<option id="it.baeyens.avreclipse.compiler.option.targetfcpu" 
				name="MCU Clock Frequency"
				valueType="string" 
				defaultValue="${AVRTARGETFCPU}"
				command="-DF_CPU=${value}UL" >
      			<enablement
            		type="CMD_USAGE">
         			<checkOption
               			optionId="it.baeyens.avreclipse.compiler.option.omitfcpu"
               			value="false">
         			</checkOption>
      			</enablement>
			</option>
				
			<inputType id="it.baeyens.avreclipse.compiler.winavr.input"
				name="C Source Files"
				sourceContentType="org.eclipse.cdt.core.cSource"
				sources="c"
				dependencyContentType="org.eclipse.cdt.core.cHeader"
				dependencyExtensions="h"
				dependencyCalculator="org.eclipse.cdt.managedbuilder.makegen.gnu.DefaultGCCDependencyCalculator2"
	 			languageId="org.eclipse.cdt.core.gcc" 
				scannerConfigDiscoveryProfileId="it.baeyens.avreclipse.core.AVRGCCManagedMakePerProjectProfileC" />

			<outputType id="it.baeyens.avreclipse.compiler.winavr.output"
				name="Object Files"
				outputs="o" 
				buildVariable="OBJS" />
		</tool>

<!-- 
####################################################################################### 
#    AVR-G++ C++ Compiler                                                                    # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.cppcompiler"
			name="AVR C++ Compiler"
		  	command="avr-g++"
		  	errorParsers="org.eclipse.cdt.core.GCCErrorParser"
		  	outputFlag="-c -o"
		  	natureFilter="ccnature" >
		  
	        <supportedProperties>
	            <property id="org.eclipse.cdt.build.core.buildType">
		            <value id="org.eclipse.cdt.build.core.buildType.debug"/>
	    	        <value id="org.eclipse.cdt.build.core.buildType.release"/>
	            </property>
	        </supportedProperties>
	         
	        <envVarBuildPath 
	         	pathType="buildpathInclude"
	         	variableList="CPATH,CPLUS_INCLUDE_PATH" />
	
			<optionCategory	id="it.baeyens.avreclipse.cppcompiler.category.directories" 
				name="Directories" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.incpath"
				name="Include Paths (-I)" 
				category="it.baeyens.avreclipse.cppcompiler.category.directories"
				valueType="includePath"
				browseType="directory"
				command="-I" />
	
			<optionCategory id="it.baeyens.avreclipse.cppcompiler.category.syms"
				  name="Symbols">
			</optionCategory>
			<option id="it.baeyens.avreclipse.cppcompiler.option.omitfcpu"
				name="Omit F_CPU" 
				category="it.baeyens.avreclipse.cppcompiler.category.syms"
				valueType="boolean"
				defaultValue="false" 
				tip="Select if F_CPU is already defined in the source" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.def"
				name="Define Syms (-D)"
				category="it.baeyens.avreclipse.cppcompiler.category.syms"
				command="-D"
				valueType="definedSymbols">
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.undef"
				name="Undefine Syms (-U)"
				category="it.baeyens.avreclipse.cppcompiler.category.syms"
				command="-U"
				valueType="undefDefinedSymbols">
			</option>
	
			<optionCategory id="it.baeyens.avreclipse.cppcompiler.category.warnings"
				name="Warnings" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.nowarn"
				name="No Warnings (-w)"
				category="it.baeyens.avreclipse.cppcompiler.category.warnings"
				valueType="boolean"
				defaultValue="false"
				command="-w" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.allwarn"
				name="All Warnings (-Wall)"
				category="it.baeyens.avreclipse.cppcompiler.category.warnings"
				valueType="boolean"
				defaultValue="true"
				command="-Wall" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.warnerr" 
				name="Warnings as Errors (-Werror)"
				category="it.baeyens.avreclipse.cppcompiler.category.warnings"
				valueType="boolean"
				defaultValue="false"
				command="-Werror" />
		
			<optionCategory id="it.baeyens.avreclipse.cppcompiler.category.debug" 
				name="Debugging" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.debug.level"
				name="Generate Debugging Info" 
				category="it.baeyens.avreclipse.cppcompiler.category.debug"
				valueType="enumerated" >
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="it.baeyens.avreclipse.cppcompiler.option.debug.level.none"
					extensionAdjustment="false" >
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.release" />
				</enablement>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="it.baeyens.avreclipse.cppcompiler.option.debug.level.g2"
					extensionAdjustment="false" >
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.debug" />
				</enablement>
			    <enumeratedOptionValue
			    	  command=""
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.none"
			          name="No debugging info" />
			    <enumeratedOptionValue
			          command="-g1"
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.g1"
			          name="Minimal debugging info (-g1)" />
			    <enumeratedOptionValue
			          command="-g2"
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.g2"
			          isDefault="true"
			          name="Standard debugging info (-g2)" />
			    <enumeratedOptionValue
			          command="-g3"
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.g3"
			          name="Extra debugging info (-g3)" />
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.debug.type"
				name="Debug Info Format" 
				category="it.baeyens.avreclipse.cppcompiler.category.debug"
				valueType="enumerated" >
			    <enumeratedOptionValue
			    	  isDefault="true"
			    	  command="-gstabs"
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.stabs"
			          name="stabs (avr-gdb / Insight)" />
			    <enumeratedOptionValue
			          command="-gdwarf-2"
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.dwarf-2"
			          name="dwarf-2 (AVR Studio 4.11+ Debugger)" />
			    <enumeratedOptionValue
			    	  command="-gstabs+"
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.stabsplus"
			          name="stabs+ (stabs + gdb extensions)" />
			    <enumeratedOptionValue
			          command=""
			          id="it.baeyens.avreclipse.cppcompiler.option.debug.level.default"
			          name="Operating System Default" />
				<enablement 
					type="UI_ENABLEMENT|CMD_USAGE" >
					<not>
						<checkOption
							optionId="it.baeyens.avreclipse.cppcompiler.option.debug.level"
					  		value="it.baeyens.avreclipse.cppcompiler.option.debug.level.none" />
					</not>
				</enablement>
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.debug.other"
				name="Other Debug Flags"
				category="it.baeyens.avreclipse.cppcompiler.category.debug"
				valueType="string">
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.debug.prof"
				name="Generate prof information (-p)"
				category="it.baeyens.avreclipse.cppcompiler.category.debug"
				command="-p"
				defaultValue="false"
				valueType="boolean" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.debug.gprof"
				name="Generate gprof information (-pg)"
				category="it.baeyens.avreclipse.cppcompiler.category.debug"
				command="-pg"
				defaultValue="false"
				valueType="boolean" />
		
			<optionCategory
				id="it.baeyens.avreclipse.cppcompiler.category.optimization"
				name="Optimization" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.optimize"
				name="Optimization Level"
				category="it.baeyens.avreclipse.cppcompiler.category.optimization"
				valueType="enumerated" >
				<enumeratedOptionValue command="-O0"
					name="No Optimizations (-O0)"
					id="it.baeyens.avreclipse.cppcompiler.optimize.none" />
				<enumeratedOptionValue command="-O1"
					name="Slight Optimizations (-O1)"
					id="it.baeyens.avreclipse.cppcompiler.optimize.one" />
				<enumeratedOptionValue command="-O2"
					name="Moderate Optimizations (-O2)"
					id="it.baeyens.avreclipse.cppcompiler.optimize.two" />
				<enumeratedOptionValue command="-O3"
					name="Heavy Optimizations (-O3)"
					id="it.baeyens.avreclipse.cppcompiler.optimize.three" />
				<enumeratedOptionValue command="-Os"
					id="it.baeyens.avreclipse.cppcompiler.optimize.size"
					name="Size Optimizations (-Os)">
				</enumeratedOptionValue>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value" 
					value="it.baeyens.avreclipse.cppcompiler.optimize.size"
					extensionAdjustment="false">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.release" />
				</enablement>
				<enablement 
					type="CONTAINER_ATTRIBUTE"
					attribute="value" 
					value="it.baeyens.avreclipse.cppcompiler.optimize.none"
					extensionAdjustment="false">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildType"
						value="org.eclipse.cdt.build.core.buildType.debug" />
				</enablement>
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.optimize.packstruct"
				name="Pack structs (-fpack-struct)"
				category="it.baeyens.avreclipse.cppcompiler.category.optimization"
				command="-fpack-struct"
				valueType="boolean"
				defaultValue="true" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.optimize.shortenums"
				name="Short enums (-fshort-enums)"
				category="it.baeyens.avreclipse.cppcompiler.category.optimization"
				command="-fshort-enums"
				valueType="boolean"
				defaultValue="true" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.optimize.other"
				name="Other Optimization Flags"
				category="it.baeyens.avreclipse.cppcompiler.category.optimization"
				valueType="string" />

			<optionCategory id="it.baeyens.avreclipse.cppcompiler.category.language"
				name="Language Standard" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.std"
				name="Language Standard"
				category="it.baeyens.avreclipse.cppcompiler.category.language"
				valueType="enumerated" >
				<enumeratedOptionValue command=""
					id="it.baeyens.avreclipse.cppcompiler.option.std.default"
					name="Compiler Default"
					isDefault="true" />
				<enumeratedOptionValue command="-ansi"
					id="it.baeyens.avreclipse.cppcompiler.option.std.ansi"
					name="ISO C++ (-ansi)" />
				<enumeratedOptionValue command="-std=c++98"
					id="it.baeyens.avreclipse.cppcompiler.option.std.cpp98"
					name="1998 ISO C++ incl. amendments (-std=c++98)" />
				<enumeratedOptionValue command="-std=gnu++98"
					id="it.baeyens.avreclipse.cppcompiler.option.std.gnucpp98"
					name="1998 ISO C++ plus GNU extensions(-std=gnu++98)" />
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.language.uchar"
				name="char is unsigned (-funsigned-char)"
				category="it.baeyens.avreclipse.cppcompiler.category.language"
				command="-funsigned-char"
				valueType="boolean"
				defaultValue="true"	/>
			<option id="it.baeyens.avreclipse.cppcompiler.option.language.ubitfields"
				name="bitfields are unsigned (-funsigned-bitfields)"
				category="it.baeyens.avreclipse.cppcompiler.category.language"
				command="-funsigned-bitfields"
				valueType="boolean"
				defaultValue="true"	/>
			<option id="it.baeyens.avreclipse.cppcompiler.option.language.noexceptions"
				name="Do not use Exceptions (-fno-exceptions)"
				tip="Exceptions are currently not supported on the avr-gcc toolchain"
				category="it.baeyens.avreclipse.cppcompiler.category.language"
				command="-fno-exceptions"
				valueType="boolean"
				defaultValue="true"	/>

			<optionCategory id="it.baeyens.avreclipse.cppcompiler.category.misc"
				name="Miscellaneous" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.verbose"
				name="Verbose (-v)" 
				category="it.baeyens.avreclipse.cppcompiler.category.misc"
				valueType="boolean" 
				defaultValue="false"
				command="-v" />
			<option id="it.baeyens.avreclipse.cppcompiler.option.otherflags"
				name="Other flags"
				category="it.baeyens.avreclipse.cppcompiler.category.misc" 
				valueType="string"
				defaultValue="" />
		
			<option id="it.baeyens.avreclipse.cppcompiler.option.targetmcu"
				name="MCU Type"
				valueType="string"
				defaultValue="${AVRTARGETMCU}"
				command="-mmcu=" >
			</option>
			<option id="it.baeyens.avreclipse.cppcompiler.option.targetfcpu" 
				name="MCU Clock Frequency"
				valueType="string" 
				defaultValue="${AVRTARGETFCPU}"
				command="-DF_CPU=${value}UL" >
      			<enablement
            		type="CMD_USAGE">
         			<checkOption
               			optionId="it.baeyens.avreclipse.cppcompiler.option.omitfcpu"
               			value="false">
         			</checkOption>
      			</enablement>
			</option>
		
			<inputType id="it.baeyens.avreclipse.cppcompiler.input"
				sourceContentType="org.eclipse.cdt.core.cxxSource"
				sources="c,C,cc,cxx,cpp"
				dependencyContentType="org.eclipse.cdt.core.cxxHeader"
				dependencyExtensions="h,H,hpp"
				dependencyCalculator="org.eclipse.cdt.managedbuilder.makegen.gnu.DefaultGCCDependencyCalculator2"
				languageId="org.eclipse.cdt.core.g++"
				scannerConfigDiscoveryProfileId="it.baeyens.avreclipse.core.AVRGCCManagedMakePerProjectProfileCPP" />
          
			<outputType id="it.baeyens.avreclipse.cppcompiler.output"
				name="Object Files"
				outputs="o"
				buildVariable="OBJS" />
		</tool>

<!-- 
####################################################################################### 
#    AVR C Linker                                                                    # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.linker.winavr" 
			name="AVR C Linker"
			command="avr-gcc"
			outputFlag="-o"
			natureFilter="cnature"
			errorParsers="org.eclipse.cdt.core.GLDErrorParser" >
			
			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.app" />
				</property>
			</supportedProperties>
			
			<envVarBuildPath 
				pathType="buildpathLibrary"
				variableList="LIBRARY_PATH" />
			
			<optionCategory id="it.baeyens.avreclipse.linker.category.general"
				name="General" />
			<option id="it.baeyens.avreclipse.linker.option.genmap" 
				name="Map Filename"
				category="it.baeyens.avreclipse.linker.category.general" 
				command="-Wl,-Map," 
				browseType="file" 
				defaultValue="${BuildArtifactFileBaseName}.map"
				valueType="string" />
			<option id="it.baeyens.avreclipse.linker.option.nosyms" 
				name="Omit Symbols (-s)" 
				category="it.baeyens.avreclipse.linker.category.general"
				valueType="boolean" 
				defaultValue="false" 
				command="-s" />
			<option id="it.baeyens.avreclipse.linker.option.otherlinkargs"
				name="Other Arguments" 
				category="it.baeyens.avreclipse.linker.category.general"
				valueType="string" />

			<optionCategory id="it.baeyens.avreclipse.linker.category.libs"
				name="Libraries" />
			<option id="it.baeyens.avreclipse.linker.option.libs"
				name="Libraries (-l)"
				category="it.baeyens.avreclipse.linker.category.libs" 
				valueType="libs"
				browseType="none" 
				command="-l" />
			<option id="it.baeyens.avreclipse.linker.option.libpath" 
				name="Libraries Path (-L)" 
				category="it.baeyens.avreclipse.linker.category.libs"
				valueType="stringList" 
				browseType="directory"
				command="-L" />
				
			<optionCategory id="it.baeyens.avreclipse.linker.category.objs"
				name="Objects" />
			<option id="it.baeyens.avreclipse.linker.option.otherlink"
				name="(-Xlinker) Options" 
				category="it.baeyens.avreclipse.linker.category.objs"
				valueType="stringList" 
				command="-Xlinker" />
			<option id="it.baeyens.avreclipse.linker.option.otherobjs"
				name="Other Objects (*.o)" 
				category="it.baeyens.avreclipse.linker.category.objs"
				valueType="userObjs"
				browseType="file" />
				
			<option id="it.baeyens.avreclipse.linker.option.targetmcu" 
				name="MCU Type"
				valueType="string"
				defaultValue="${AVRTARGETMCU}"
				command="-mmcu=" >
			</option>
				
			<inputType id="it.baeyens.avreclipse.tool.linker.input" 
				name="OBJ Files"
				sourceContentType="org.eclipse.cdt.managedbuilder.core.compiledObjectFile"
				sources="obj"
				multipleOfType="true"
				buildVariable="OBJS" >
	            <additionalInput
	            	paths="$(USER_OBJS)"
	            	kind="additionalinputdependency">
	            </additionalInput>
	            <additionalInput
	            	paths="$(LIBS)"
	            	kind="additionalinput">
	            </additionalInput>
			</inputType>

			<outputType id="it.baeyens.avreclipse.tool.linker.output" 
				name="ELF Binary Files"
				outputs="elf"
				nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider"
				buildVariable="ELFS" />
		</tool>

<!-- 
####################################################################################### 
#    AVR C++ Linker                                                                    # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.cpplinker"
			name="AVR C++ Linker"
			command="avr-g++"
			outputFlag="-o"
            natureFilter="ccnature"
            errorParsers="org.eclipse.cdt.core.GLDErrorParser">

            <supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.app" />
				</property>
			</supportedProperties>

			<envVarBuildPath 
				pathType="buildpathLibrary"
				variableList="LIBRARY_PATH">
			</envVarBuildPath>
         
			<optionCategory id="it.baeyens.avreclipse.cpplinker.category.general"
				name="General" />
			<option id="it.baeyens.avreclipse.cpplinker.option.genmap" 
				name="Map Filename"
				category="it.baeyens.avreclipse.cpplinker.category.general" 
				command="-Wl,-Map,${value},--cref" 
				browseType="file" 
				defaultValue="${BuildArtifactFileBaseName}.map"
				valueType="string" />
			<option id="it.baeyens.avreclipse.cpplinker.option.nosyms" 
				name="Omit Symbols (-s)" 
				category="it.baeyens.avreclipse.cpplinker.category.general"
				valueType="boolean" 
				defaultValue="false" 
				command="-s" />
			<option id="it.baeyens.avreclipse.cpplinker.option.nostart"
				name="No startup or default libs (-nostdlib)"
				category="it.baeyens.avreclipse.cpplinker.category.general" 
				command="-nostdlib"
				valueType="boolean"
				defaultValue="false" />
			<option id="it.baeyens.avreclipse.cpplinker.option.otherlinkargs"
				name="Other Arguments" 
				category="it.baeyens.avreclipse.cpplinker.category.general"
				valueType="string" />

			<optionCategory id="it.baeyens.avreclipse.cpplinker.category.libs"
				name="Libraries" />
			<option id="it.baeyens.avreclipse.cpplinker.option.libs"
				name="Libraries (-l)"
				category="it.baeyens.avreclipse.cpplinker.category.libs" 
				valueType="libs"
				browseType="none" 
				command="-l" />
			<option id="it.baeyens.avreclipse.cpplinker.option.libpath" 
				name="Libraries Path (-L)" 
				category="it.baeyens.avreclipse.cpplinker.category.libs"
				valueType="stringList" 
				browseType="directory"
				command="-L" />

			<optionCategory id="it.baeyens.avreclipse.cpplinker.category.objs"
				name="Objects" />
			<option id="it.baeyens.avreclipse.cpplinker.option.otherlink"
				name="(-Xlinker) Options" 
				category="it.baeyens.avreclipse.cpplinker.category.objs"
				valueType="stringList" 
				command="-Xlinker" />
			<option id="it.baeyens.avreclipse.cpplinker.option.otherobjs"
				name="Other Objects (*.o)" 
				category="it.baeyens.avreclipse.cpplinker.category.objs"
				valueType="userObjs"
				browseType="file" />
<!--  This causes linking errors if floating point is selected.
      Also the -lm enablement does not work
			<optionCategory id="it.baeyens.avreclipse.cpplinker.category.library"
				name="Library Options" />
			<option id="it.baeyens.avreclipse.cpplinker.option.library.printf"
				name="printf support"
				category="it.baeyens.avreclipse.cpplinker.category.library"
				valueType="enumerated" >
				<enumeratedOptionValue id="it.baeyens.avreclipse.cpplinker.library.printf.none"
					name="No printf"
					command=""
					isDefault="true" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.cpplinker.library.printf.min"
					name="Minimalistic printf"
					command="-Wl,-u,vfprintf -lprintf_min" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.cpplinker.library.printf.fp"
					name="Floating Point printf"
					command="-Wl,-u,vfprintf -lprintf_flt" />
			</option>
			<option id="it.baeyens.avreclipse.cpplinker.option.library.scanf"
				name="scanf support"
				category="it.baeyens.avreclipse.cpplinker.category.library"
				valueType="enumerated" >
				<enumeratedOptionValue id="it.baeyens.avreclipse.cpplinker.library.scanf.none"
					name="No scanf"
					command=""
					isDefault="true" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.cpplinker.library.scanf.min"
					name="Minimalistic scanf"
					command="-Wl,-u,vfscanf -lscanf_min" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.cpplinker.library.scanf.fp"
					name="Floating Point scanf"
					command="-Wl,-u,vfscanf -lscanf_flt" />
			</option>
			<option id="it.baeyens.avreclipse.cpplinker.option.library.libm"
				name="Include Math lib (-lm)"
				category="it.baeyens.avreclipse.cpplinker.category.library"
				command="-lm"
				valueType="boolean"
				defaultValue="false" >
				<enablement type="CONTAINER_ATTRIBUTE"
					attribute="value"
					value="true" >
					<or>
						<checkOption
							optionId="it.baeyens.avreclipse.cpplinker.option.library.printf"
							value="it.baeyens.avreclipse.cpplinker.library.printf.fp">
						</checkOption>
						<checkOption
							optionId="it.baeyens.avreclipse.cpplinker.option.library.scanf"
							value="it.baeyens.avreclipse.cpplinker.library.scanf.fp">
						</checkOption>
					</or>					
				</enablement>
			</option>
-->				
				
			<option id="it.baeyens.avreclipse.cpplinker.option.targetmcu" 
				name="MCU Type"
				valueType="string"
				defaultValue="${AVRTARGETMCU}"
				command="-mmcu=" >
			</option>

			<inputType id="it.baeyens.avreclipse.tool.cpplinker.input"
				name="OBJ Files"
				sourceContentType="org.eclipse.cdt.managedbuilder.core.compiledObjectFile"
				sources="obj"
				multipleOfType="true"
				buildVariable="OBJS" >
				<additionalInput
					paths="$(USER_OBJS)"
					kind="additionalinputdependency">
				</additionalInput>
				<additionalInput
					paths="$(LIBS)"
					kind="additionalinput">
				</additionalInput>
			</inputType>

			<outputType id="it.baeyens.avreclipse.tool.cpplinker.output"
				name="ELF Binary Files"
				outputs="elf"
				nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider"
				buildVariable="ELFS" />
		</tool>

<!-- 
####################################################################################### 
#    winAVR Archiver                                                                  # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.archiver.winavr" 
			name="AVR Archiver" 
			command="avr-ar" 
			isAbstract="true">
			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.staticLib" />
				</property>
			</supportedProperties>
			
			<optionCategory id="it.baeyens.avreclipse.archiver.category.general" 
				name="General" />
			<option id="it.baeyens.avreclipse.archiver.option.flags" 
				name="Archiver flags" 
				category="it.baeyens.avreclipse.archiver.category.general" 
				valueType="string" 
				defaultValue="-r" />
				
			<inputType id="it.baeyens.avreclipse.archiver.input" 
				sourceContentType="org.eclipse.cdt.managedbuilder.core.compiledObjectFile" 
				sources="o" 
				multipleOfType="true" 
				buildVariable="OBJS">
				<additionalInput 
					paths="$(LIBS)" 
					kind="additionalinput" />
			</inputType>
			
			<outputType id="it.baeyens.avreclipse.archiver.output" 
				outputs="a" 
				outputPrefix="lib"
				primaryOutput="true"
				nameProvider="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuLinkOutputNameProvider" 
				buildVariable="ARCHIVES" />
		</tool>

<!-- 
####################################################################################### 
#    winAVR Generate Flash ROM image                                                  #
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.objcopy.flash.winavr" 
			name="AVR Create Flash image"
			isAbstract="true"
			commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS} ${OUTPUT}"
			command="-avr-objcopy" 
			announcement="Create Flash image (ihex format)" >
			
			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.app" />
				</property>
			</supportedProperties>
			
			
			<optionCategory id="it.baeyens.avreclipse.objcopy.flash.category.general"
				name="General" />
			<option id="it.baeyens.avreclipse.objcopy.option.flash.stdopts"
				name="Options to create flash image"
				category="it.baeyens.avreclipse.objcopy.flash.category.general"
				valueType="string"
				defaultValue="-R .eeprom -O ihex" />
			<option id="it.baeyens.avreclipse.objcopy.option.flash.addopts"
				name="Additional Options for objcopy"
				category="it.baeyens.avreclipse.objcopy.flash.category.general"
				valueType="string" />
			<option id="it.baeyens.avreclipse.objcopy.flash.option.output"
				name="Output Filename"
				category="it.baeyens.avreclipse.objcopy.flash.category.general"
				valueType="string"
				value="${BuildArtifactFileBaseName}.hex"
				defaultValue="${BuildArtifactFileBaseName}.hex"
				tip="Name of the flash image." >
				<enablement
					type="CMD_USAGE" >
					<false/>
				</enablement>
			</option>

<!--  	
	Using an option for the input filename is an ugly clutch, but the linker /archiver,
	as final build target will not generate a build variable. 
-->
			<option id="it.baeyens.avreclipse.objcopy.flash.option.input"
				name="Input File"
				valueType="string"
				value="${BuildArtifactFilePrefix}${BuildArtifactFileName}"
				defaultValue="${BuildArtifactFilePrefix}${BuildArtifactFileName}" >
			</option>
			<inputType id="it.baeyens.avreclipse.tool.objcopy.flash.input"
				primaryInput="false"
				multipleOfType="true"
				option="it.baeyens.avreclipse.objcopy.flash.option.input" />
				
			<outputType id="it.baeyens.avreclipse.tool.objcopy.flash.output"
				name="Hex dump for flash rom"
				option="it.baeyens.avreclipse.objcopy.flash.option.output"
				buildVariable="FLASH_IMAGE" />
		</tool>

<!-- 
####################################################################################### 
#    winAVR Generate EEPROM image                                                     # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.objcopy.eeprom.winavr" 
			name="AVR Create EEPROM image"
			isAbstract="true"
			commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS} ${OUTPUT}"
			command="-avr-objcopy" 
			announcement="Create eeprom image (ihex format)" >
			
			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.app" />
				</property>
			</supportedProperties>

			<optionCategory id="it.baeyens.avreclipse.objcopy.eeprom.category.general"
				name="General" />
			<option id="it.baeyens.avreclipse.objcopy.option.eeprom.stdopts"
				name="Options to create eeprom image"
				category="it.baeyens.avreclipse.objcopy.eeprom.category.general"
				valueType="string"
				defaultValue="-j .eeprom --no-change-warnings --change-section-lma .eeprom=0 -O ihex" />
			<option id="it.baeyens.avreclipse.objcopy.eeprom.option.addopts"
				name="Additional Options for objcopy"
				category="it.baeyens.avreclipse.objcopy.eeprom.category.general"
				valueType="string" />
			<option id="it.baeyens.avreclipse.objcopy.eeprom.option.output"
				name="Output Filename"
				category="it.baeyens.avreclipse.objcopy.eeprom.category.general"
				valueType="string"
				value="${BuildArtifactFileBaseName}.eep"
				defaultValue="${BuildArtifactFileBaseName}.eep"
				tip="Name of the eeprom image." >
				<enablement
					type="CMD_USAGE" >
					<false/>
				</enablement>
			</option>

<!--  	
	Using an option for the input filename is an ugly clutch, but the linker /archiver,
	as final build target will not generate a build variable. 
-->
			<option id="it.baeyens.avreclipse.objcopy.eeprom.option.input"
				name="Input File"
				valueType="string"
				value="${BuildArtifactFilePrefix}${BuildArtifactFileName}"
				defaultValue="${BuildArtifactFilePrefix}${BuildArtifactFileName}" >
			</option>
			<inputType id="it.baeyens.avreclipse.tool.objcopy.eeprom.input"
				primaryInput="false"
				multipleOfType="true"
				option="it.baeyens.avreclipse.objcopy.eeprom.option.input" />
				
			<outputType id="it.baeyens.avreclipse.tool.objcopy.eeprom.output"
				option="it.baeyens.avreclipse.objcopy.eeprom.option.output"
				primaryOutput="true"
				buildVariable="EEPROM_IMAGE" />
		</tool>

<!-- 
####################################################################################### 
#    winAVR create Extended Listing                                                   # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.objdump.winavr" 
			name="AVR Create Extended Listing"
			commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS} >${OUTPUT}"
			command="-avr-objdump" >

			<supportedProperties>
				<property id="it.baeyens.avreclipse.buildType">
					<value id="it.baeyens.avreclipse.buildType.debug" />
					<value id="it.baeyens.avreclipse.buildType.release" />
				</property>
			</supportedProperties>

			<optionCategory id="it.baeyens.avreclipse.objdump.category.general"
				name="General" />
			<option id="it.baeyens.avreclipse.objdump.option.stdopts"
				name="Options to create Extended Listing"
				category="it.baeyens.avreclipse.objdump.category.general"
				valueType="string"
				defaultValue="-h -S" />
			<option id="it.baeyens.avreclipse.objdump.option.addopts"
				name="Additional Options for objdump"
				category="it.baeyens.avreclipse.objdump.category.general"
				valueType="string" />
			<option id="it.baeyens.avreclipse.objdump.option.output"
				name="Output Filename"
				category="it.baeyens.avreclipse.objdump.category.general"
				valueType="string"
				value="${BuildArtifactFileBaseName}.lss"
				defaultValue="${BuildArtifactFileBaseName}.lss"
				tip="Name of the lss file." >
				<enablement
					type="CMD_USAGE" >
					<false/>
				</enablement>
			</option>
							
<!--  	
	Using an option for the input filename is an ugly clutch, but the linker /archiver,
	as final build target will not generate a build variable. 
-->
			<option id="it.baeyens.avreclipse.objdump.option.input"
				name="Input File"
				valueType="string"
				value="${BuildArtifactFilePrefix}${BuildArtifactFileName}"
				defaultValue="${BuildArtifactFilePrefix}${BuildArtifactFileName}" >
			</option>

			<inputType id="it.baeyens.avreclipse.tool.objdump.input"
				primaryInput="false"
				multipleOfType="true"
				option="it.baeyens.avreclipse.objdump.option.input" />
				
			<outputType id="it.baeyens.avreclipse.tool.objdump.output"
				option="it.baeyens.avreclipse.objdump.option.output"
				primaryOutput="true"
				buildVariable="LSS" />
		</tool>
		
<!-- 
####################################################################################### 
#    winAVR display size of target                                                    # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.size.winavr" 
			name="Print Size"
			command="-avr-size" 
			commandLinePattern="${COMMAND} ${FLAGS} ${INPUTS}" >

			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.app" />
					<value id="it.baeyens.avreclipse.buildArtefactType.staticLib" />
				</property>
			</supportedProperties>

			<optionCategory id="it.baeyens.avreclipse.size.category.general"
				name="General" />
			<option id="it.baeyens.avreclipse.size.option.format"
		        category="it.baeyens.avreclipse.size.category.general"
		        name="Size Format"
		        valueType="enumerated"
		        applicabilityCalculator="it.baeyens.avreclipse.mbs.SizeFormatApplicabilityCalculator" >
				<enumeratedOptionValue id="it.baeyens.avreclipse.size.option.format.berkeley"
					name="Berkeley Format" 
					command="--format=berkeley" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.size.option.format.sysv"
					name="SysV Format" 
					command="--format=sysv" />
 			</option>
			<option id="it.baeyens.avreclipse.size.option.formatwithavr"
		        category="it.baeyens.avreclipse.size.category.general"
		        name="Size Format"
		        valueType="enumerated"
		        applicabilityCalculator="it.baeyens.avreclipse.mbs.SizeFormatApplicabilityCalculator" >
				<enumeratedOptionValue id="it.baeyens.avreclipse.size.option.format.avr"
					name="AVR Format" 
					command="--format=avr" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.size.option.format.berkeley"
					name="Berkeley Format" 
					command="--format=berkeley" />
				<enumeratedOptionValue id="it.baeyens.avreclipse.size.option.format.sysv"
					name="SysV Format" 
					command="--format=sysv" />
 			</option>
			<option id="it.baeyens.avreclipse.size.option.totals"
				name="Show Totals"
				category="it.baeyens.avreclipse.size.category.general"
				valueType="boolean"
				defaultValue="true"
				command="-t" 
				applicabilityCalculator="it.baeyens.avreclipse.mbs.SizeOptionsApplicabilityCalculator" >
			</option>			
			<option id="it.baeyens.avreclipse.size.option.hex"
				name="Display as hex"
				category="it.baeyens.avreclipse.size.category.general"
				valueType="boolean"
				defaultValue="false"
				command="-x"
				applicabilityCalculator="it.baeyens.avreclipse.mbs.SizeOptionsApplicabilityCalculator" >
			</option>			

			<option id="it.baeyens.avreclipse.size.option.targetmcu"
				name="MCU Type"
				category="it.baeyens.avreclipse.tool.size.winavr"
				valueType="string"
				defaultValue="${AVRTARGETMCU}"
				command="--mcu=" 
		        applicabilityCalculator="it.baeyens.avreclipse.mbs.SizeOptionsApplicabilityCalculator" >
			</option>
			
<!--  	
	Using an option for the input filename is an ugly clutch, but the linker /archiver,
	as final build target will not generate a build variable. 
-->
			<option id="it.baeyens.avreclipse.size.option.input"
				name="Input File"
				valueType="string"
				value="${BuildArtifactFilePrefix}${BuildArtifactFileName}"
				defaultValue="${BuildArtifactFilePrefix}${BuildArtifactFileName}" >
			</option>

			<inputType id="it.baeyens.avreclipse.tool.size.input"
				primaryInput="false"
				multipleOfType="true"
				option="it.baeyens.avreclipse.size.option.input" />
 				
			<outputType id="it.baeyens.avreclipse.tool.size.output"
				outputNames="sizedummy"
				primaryOutput="true" 
				buildVariable="SIZEDUMMY"/>
		</tool>
		

<!-- 
####################################################################################### 
#    AVRDude Tool                                                                     # 
####################################################################################### 
-->
		<tool id="it.baeyens.avreclipse.tool.avrdude" 
			name="AVRDude"
			command="${AVRDUDEPATH}avrdude"
			commandLinePattern="${COMMAND} ${FLAGS}" >

			<supportedProperties>
				<property id="org.eclipse.cdt.build.core.buildArtefactType">
					<value id="it.baeyens.avreclipse.buildArtefactType.app" />
				</property>
			</supportedProperties>

			<option id="it.baeyens.avreclipse.avrdude.option.standard"
				name="AVRDude Options"
				valueType="string"
				defaultValue="${AVRDUDEOPTIONS}"
				command="" >
			</option>

			<option id="it.baeyens.avreclipse.avrdude.option.actions"
				name="AVRDude Action Options"
				valueType="string"
				defaultValue="${AVRDUDEACTIONOPTIONS}"
				command="" >
			</option>

			
<!--  	
	Using an option for the input filename is an ugly clutch, but the linker /archiver,
	as final build target will not generate a build variable. 
-->
			<option id="it.baeyens.avreclipse.avrdude.option.input"
				name="Input File"
				valueType="string"
				value="${BuildArtifactFilePrefix}${BuildArtifactFileName}"
				defaultValue="${BuildArtifactFilePrefix}${BuildArtifactFileName}" >
				<enablement type="CMD_USAGE">
					<false/>
				</enablement>
			</option>
			
			<inputType id="it.baeyens.avreclipse.tool.avrdude.input"
				primaryInput="false"
				multipleOfType="true"
				option="it.baeyens.avreclipse.avrdude.option.input" />

			<outputType id="it.baeyens.avreclipse.tool.avrdude.output"
				outputNames="avrdudedummy"
				primaryOutput="true" 
				buildVariable="AVRDUDEDUMMY"/>
		</tool>

		
<!-- 
####################################################################################### 
#    Default builder                                                                  # 
####################################################################################### 
-->
		<builder id="it.baeyens.avreclipse.target.gnu.builder" 
			name="AVR GNU Make Builder"
			isAbstract="true"
			command="make"
			autoBuildTarget="all"
			incrementalBuildTarget="all" 
			cleanBuildTarget="clean" 
			ignoreErrCmd="-k"
			buildfileGenerator="org.eclipse.cdt.managedbuilder.makegen.gnu.GnuMakefileGenerator"
			errorParsers="org.eclipse.cdt.core.MakeErrorParser"
			isVariableCaseSensitive="true"
			macroInputDirRelPathValue="$(dir $&lt;)"
			macroInputFileBaseNameValue="$(basename $(notdir $&lt;))"
			macroInputFileExtValue="$(suffix $(notdir $&lt;))"
			macroInputFileNameValue="$(notdir $&lt;)"
			macroInputFileRelPathValue="$&lt;"
			macroOutputDirRelPathValue="$(dir $@)"
			macroOutputFileBaseNameValue="$(basename (notdir $@))"
			macroOutputFileExtValue="$(suffix $(notdir $@)"
			macroOutputFileNameValue="$(notdir $@)"
			macroOutputFileRelPathValue="$@" 
			parallelBuildCmd="-j*"
			reservedMacroNames="ROOT,DEPS,OBJS,.*_SRCS,EXECUTABLES,SUBDIRS,LIBS,USER_OBJS,.*_INPUTS,.*_OUTPUTS"
			variableFormat="${=}" 
			/>

<!-- 
####################################################################################### 
#    Default toolchain                                                                # 
####################################################################################### 
-->
		<toolChain
	        id="it.baeyens.avreclipse.toolchain.winavr.base"
	        name="AVR-GCC Toolchain"
	        configurationEnvironmentSupplier="it.baeyens.avreclipse.mbs.AVRTargetEnvvarSupplier"
	        configurationMacroSupplier="it.baeyens.avreclipse.mbs.AVRTargetBuildMacroSupplier"
	        scannerConfigDiscoveryProfileId="it.baeyens.avreclipse.core.AVRGCCManagedMakePerProjectProfileC">
			
  			<targetPlatform id="it.baeyens.avreclipse.targetplatform.avr" 
				name="AVR Cross-Target"
				archList="all"
				osList="all" 
				binaryParser="org.eclipse.cdt.core.ELF" />

			<!-- ************************************************ -->
			<!-- * The Toolchain Options for the extended tools * -->
			<!-- ************************************************ -->
			<optionCategory id="it.baeyens.avreclipse.toolchain.category.addtools"
				name="Additional Tools in Toolchain"
				owner="it.baeyens.avreclipse.toolchain.winavr.base" />
			<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash"
				name="Generate HEX file for Flash memory"
				category="it.baeyens.avreclipse.toolchain.category.addtools"
				valueType="boolean" >
				<enablement 
					type="ALL">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildArtefactType"
						value="it.baeyens.avreclipse.buildArtefactType.app" />
				</enablement>
			</option>
			<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom"
				name="Generate HEX file for EEPROM"
				category="it.baeyens.avreclipse.toolchain.category.addtools"
				valueType="boolean" >
				<enablement 
					type="ALL">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildArtefactType"
						value="it.baeyens.avreclipse.buildArtefactType.app" />
				</enablement>
			</option>
			<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objdump"
				name="Generate Extended Listing (Source + generated Assembler)"
				category="it.baeyens.avreclipse.toolchain.category.addtools"
				valueType="boolean" >
			</option>
			<option id="it.baeyens.avreclipse.toolchain.options.toolchain.size"
				name="Print Size"
				category="it.baeyens.avreclipse.toolchain.category.addtools"
				valueType="boolean"
				tip="Prints the size of the final target" >
			</option>
			<option id="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude"
				name="AVRDude"
				category="it.baeyens.avreclipse.toolchain.category.addtools"
				valueType="boolean"
				tip="Uploads the application to the target MCU" >
				<!-- Bug 2454094: Avrdude should only be an option on applications, not on static libs -->
				<enablement 
					type="ALL">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildArtefactType"
						value="it.baeyens.avreclipse.buildArtefactType.app" />
				</enablement>
			</option>
 	
 			
			<!-- ************************************************ -->
			<!-- * The Builder for the base Toolchain           * -->
			<!-- ************************************************ -->
			<builder superClass="it.baeyens.avreclipse.target.gnu.builder"
				id="it.baeyens.avreclipse.target.builder.winavr.base" />

			<!-- ************************************************ -->
			<!-- * All Tools of the base Toolchain              * -->
			<!-- ************************************************ -->
			<tool id="it.baeyens.avreclipse.tool.assembler.winavr.base"
				superClass="it.baeyens.avreclipse.tool.assembler.winavr" />

			<tool id="it.baeyens.avreclipse.tool.compiler.winavr.base"
				superClass="it.baeyens.avreclipse.tool.compiler.winavr" />
			<tool id="it.baeyens.avreclipse.tool.cppcompiler.base"
				superClass="it.baeyens.avreclipse.tool.cppcompiler" />

			<tool id="it.baeyens.avreclipse.tool.linker.winavr.base"
				superClass="it.baeyens.avreclipse.tool.linker.winavr">
				<enablement type="ALL">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildArtefactType"
						value="it.baeyens.avreclipse.buildArtefactType.app" />
				</enablement>
			</tool>
			<tool id="it.baeyens.avreclipse.tool.cpplinker.base"
				superClass="it.baeyens.avreclipse.tool.cpplinker">
				<enablement type="ALL">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildArtefactType"
						value="it.baeyens.avreclipse.buildArtefactType.app" />
				</enablement>
			</tool>
			
			<tool id="it.baeyens.avreclipse.tool.archiver.winavr.base"
				superClass="it.baeyens.avreclipse.tool.archiver.winavr">
				<enablement type="ALL">
					<checkBuildProperty
						property="org.eclipse.cdt.build.core.buildArtefactType"
						value="it.baeyens.avreclipse.buildArtefactType.staticLib" />
				</enablement>
			</tool>

		</toolChain>

<!-- 
####################################################################################### 
#    Default configuration                                                            # 
####################################################################################### 
-->
		<configuration id="it.baeyens.avreclipse.config.winavr.base"
			artifactExtension="elf" 
			cleanCommand="rm -rf" >
			<enablement type="CONTAINER_ATTRIBUTE"
				attribute="artifactExtension" value="a"
				extensionAdjustment="false">
				<checkBuildProperty
					property="org.eclipse.cdt.build.core.buildArtefactType"
					value="it.baeyens.avreclipse.buildArtefactType.staticLib" />
			</enablement>
		</configuration>

<!-- 
####################################################################################### 
#    Application project                                                              # 
####################################################################################### 
-->
		<projectType id="it.baeyens.avreclipse.project.winavr.elf"
			convertToId="it.baeyens.avreclipse.project.winavr.elf_2.1.0"/>

		<projectType id="it.baeyens.avreclipse.project.winavr.elf_2.1.0"
			buildArtefactType="it.baeyens.avreclipse.buildArtefactType.app">

			<configuration id="it.baeyens.avreclipse.configuration.app.debug"
				name="Debug"
				parent="it.baeyens.avreclipse.config.winavr.base"
				buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug" >
				<toolChain id="it.baeyens.avreclipse.toolchain.winavr.app.debug"
					superClass="it.baeyens.avreclipse.toolchain.winavr.base" 
					secondaryOutputs="it.baeyens.avreclipse.tool.objdump.output;it.baeyens.avreclipse.tool.objcopy.flash.output;it.baeyens.avreclipse.tool.objcopy.eeprom.output;it.baeyens.avreclipse.tool.size.output;it.baeyens.avreclipse.tool.avrdude.output" > 

					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash.app.debug"
						defaultValue="false"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom.app.debug"
						defaultValue="false"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.app.debug"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objdump" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.size.app.debug"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.size" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude.app.debug"
						defaultValue="false"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude" /> 

					<targetPlatform
						id="it.baeyens.avreclipse.targetplatform.winavr.app.debug"
						superClass="it.baeyens.avreclipse.targetplatform.avr" />
					<builder
						id="it.baeyens.avreclipse.target.builder.winavr.app.debug"
						superClass="it.baeyens.avreclipse.target.builder.winavr.base" />

					<tool
						id="it.baeyens.avreclipse.tool.assembler.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.assembler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.compiler.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.compiler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.cppcompiler.app.debug"
						superClass="it.baeyens.avreclipse.tool.cppcompiler.base" />
					<tool 
						id="it.baeyens.avreclipse.tool.linker.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.linker.winavr.base" />
					<tool 
						id="it.baeyens.avreclipse.tool.cpplinker.app.debug"
						superClass="it.baeyens.avreclipse.tool.cpplinker.base" />
					<tool 
						id="it.baeyens.avreclipse.tool.objdump.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.objdump.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.app.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.debug"
								value="true" />
						</enablement>
					</tool>
					<tool
						id="it.baeyens.avreclipse.tool.objcopy.flash.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.objcopy.flash.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash.app.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.debug"
								value="true" />
						</enablement>
					</tool>
					<tool
						id="it.baeyens.avreclipse.tool.objcopy.eeprom.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.objcopy.eeprom.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom.app.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.debug"
								value="true" />
						</enablement>
					</tool>
					<tool 
						id="it.baeyens.avreclipse.tool.size.winavr.app.debug"
						superClass="it.baeyens.avreclipse.tool.size.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.size.app.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.debug"
								value="true" />
						</enablement>
					</tool>
					<tool 
						id="it.baeyens.avreclipse.tool.avrdude.app.debug"
						superClass="it.baeyens.avreclipse.tool.avrdude" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude.app.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.debug"
								value="true" />
						</enablement>
					</tool>
				</toolChain>
			</configuration>

			<configuration id="it.baeyens.avreclipse.configuration.app.release" 
				name="Release"
				parent="it.baeyens.avreclipse.config.winavr.base"
				buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release">
				<toolChain id="it.baeyens.avreclipse.toolchain.winavr.app.release"
					superClass="it.baeyens.avreclipse.toolchain.winavr.base" 
					secondaryOutputs="it.baeyens.avreclipse.tool.objdump.output;it.baeyens.avreclipse.tool.objcopy.flash.output;it.baeyens.avreclipse.tool.objcopy.eeprom.output;it.baeyens.avreclipse.tool.size.output;it.baeyens.avreclipse.tool.avrdude.output" > 

					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash.app.release"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom.app.release"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.app.release"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objdump" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.size.app.release"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.size" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude.app.release"
						defaultValue="false"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude" /> 

					<targetPlatform
						id="it.baeyens.avreclipse.targetplatform.winavr.app.release "
						superClass="it.baeyens.avreclipse.targetplatform.avr" />
					<builder
						id="it.baeyens.avreclipse.target.builder.winavr.app.release"
						superClass="it.baeyens.avreclipse.target.builder.winavr.base" />

					<tool
						id="it.baeyens.avreclipse.tool.assembler.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.assembler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.compiler.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.compiler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.cppcompiler.app.release"
						superClass="it.baeyens.avreclipse.tool.cppcompiler.base" />
					<tool
						id="it.baeyens.avreclipse.tool.linker.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.linker.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.cpplinker.app.release"
						superClass="it.baeyens.avreclipse.tool.cpplinker.base" />
					<tool 
						id="it.baeyens.avreclipse.tool.objdump.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.objdump.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.app.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.release"
								value="true" />
						</enablement>
					</tool>
					<tool
						id="it.baeyens.avreclipse.tool.objcopy.flash.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.objcopy.flash.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.flash.app.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.release"
								value="true" />
						</enablement>
					</tool>
					<tool
						id="it.baeyens.avreclipse.tool.objcopy.eeprom.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.objcopy.eeprom.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objcopy.eeprom.app.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.release"
								value="true" />
						</enablement>
					</tool>
					<tool 
						id="it.baeyens.avreclipse.tool.size.winavr.app.release"
						superClass="it.baeyens.avreclipse.tool.size.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.size.app.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.release"
								value="true" />
						</enablement>
					</tool>
					<tool 
						id="it.baeyens.avreclipse.tool.avrdude.app.release"
						superClass="it.baeyens.avreclipse.tool.avrdude" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.avrdude.app.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.app.release"
								value="true" />
						</enablement>
					</tool>
				</toolChain>
			</configuration>
		</projectType>

<!-- 
####################################################################################### 
#    Static library project                                                           # 
####################################################################################### 
-->
		<projectType id="it.baeyens.avreclipse.project.winavr.staticlib"
			buildArtefactType="it.baeyens.avreclipse.buildArtefactType.staticLib">
			
			<configuration id="it.baeyens.avreclipse.configuration.lib.debug"
				name="Debug"
				parent="it.baeyens.avreclipse.config.winavr.base"
				artifactExtension="a" 
				cleanCommand="rm -f"
				buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug">
				<toolChain id="it.baeyens.avreclipse.toolchain.winavr.lib.debug"
					superClass="it.baeyens.avreclipse.toolchain.winavr.base" 
					secondaryOutputs="it.baeyens.avreclipse.tool.objdump.output;it.baeyens.avreclipse.tool.size.output" > 

					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.lib.debug"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objdump" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.size.lib.debug"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.size" /> 

					<targetPlatform
						id="it.baeyens.avreclipse.targetplatform.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.targetplatform.avr" />
					<builder
						id="it.baeyens.avreclipse.target.builder.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.target.builder.winavr.base" />

					<tool
						id="it.baeyens.avreclipse.tool.assembler.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.tool.assembler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.compiler.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.tool.compiler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.cppcompiler.lib.debug"
						superClass="it.baeyens.avreclipse.tool.cppcompiler.base" />
					<tool
						id="it.baeyens.avreclipse.tool.archiver.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.tool.archiver.winavr.base" />
					<tool 
						id="it.baeyens.avreclipse.tool.objdump.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.tool.objdump.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.lib.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.lib.debug"
								value="true" />
						</enablement>
					</tool>
					<tool 
						id="it.baeyens.avreclipse.tool.size.winavr.lib.debug"
						superClass="it.baeyens.avreclipse.tool.size.winavr" >
						<option id="it.baeyens.avreclipse.size.option.format.lib.debug"
							superClass="it.baeyens.avreclipse.size.option.format"
							value="it.baeyens.avreclipse.size.option.format.berkeley" />
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.size.lib.debug"
								holderId="it.baeyens.avreclipse.toolchain.winavr.lib.debug"
								value="true" />
						</enablement>

					</tool>
						
				</toolChain>
			</configuration>

			<configuration id="it.baeyens.avreclipse.configuration.lib.release" 
				name="Release"
				parent="it.baeyens.avreclipse.config.winavr.base"
				artifactExtension="a" 
				cleanCommand="rm -rf"
				buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release">
				<toolChain id="it.baeyens.avreclipse.toolchain.winavr.lib.release"
					superClass="it.baeyens.avreclipse.toolchain.winavr.base" 
					secondaryOutputs="it.baeyens.avreclipse.tool.objdump.output;it.baeyens.avreclipse.tool.size.output" > 

					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.lib.release"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.objdump" /> 
					<option id="it.baeyens.avreclipse.toolchain.options.toolchain.size.lib.release"
						defaultValue="true"
						superClass="it.baeyens.avreclipse.toolchain.options.toolchain.size" /> 

					<targetPlatform
						id="it.baeyens.avreclipse.targetplatform.winavr.lib.release"
						superClass="it.baeyens.avreclipse.targetplatform.avr" />
					<builder
						id="it.baeyens.avreclipse.target.builder.winavr.lib.release"
						superClass="it.baeyens.avreclipse.target.builder.winavr.base" />

					<tool
						id="it.baeyens.avreclipse.tool.assembler.winavr.lib.release"
						superClass="it.baeyens.avreclipse.tool.assembler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.compiler.winavr.lib.release"
						superClass="it.baeyens.avreclipse.tool.compiler.winavr.base" />
					<tool
						id="it.baeyens.avreclipse.tool.cppcompiler.lib.release"
						superClass="it.baeyens.avreclipse.tool.cppcompiler.base" />
					<tool
						id="it.baeyens.avreclipse.tool.archiver.winavr.lib.release"
						superClass="it.baeyens.avreclipse.tool.archiver.winavr.base" />
					<tool 
						id="it.baeyens.avreclipse.tool.objdump.winavr.lib.release"
						superClass="it.baeyens.avreclipse.tool.objdump.winavr" >
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.objdump.lib.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.lib.release"
								value="true" />
						</enablement>
					</tool>
					<tool 
						id="it.baeyens.avreclipse.tool.size.winavr.lib.release"
						superClass="it.baeyens.avreclipse.tool.size.winavr" >
						<option id="it.baeyens.avreclipse.size.option.format.lib.release"
							superClass="it.baeyens.avreclipse.size.option.format"
							value="it.baeyens.avreclipse.size.option.format.berkeley" />
						<enablement type="ALL">
							<checkOption
								optionId="it.baeyens.avreclipse.toolchain.options.toolchain.size.lib.release"
								holderId="it.baeyens.avreclipse.toolchain.winavr.lib.release"
								value="true" />
						</enablement>

					</tool>
				</toolChain>
			</configuration>
		</projectType>
	</extension>

	<extension point="org.eclipse.cdt.managedbuilder.core.buildProperties"
		id="it.baeyens.avreclipse.baseproperties"
		name="AVR Cross Target Base Build Properties Definition">
		
		<propertyValue
			property="org.eclipse.cdt.build.core.buildArtefactType"
			id="it.baeyens.avreclipse.buildArtefactType.app"
			name="AVR Cross Target Application" />
		<propertyValue
			property="org.eclipse.cdt.build.core.buildArtefactType"
			id="it.baeyens.avreclipse.buildArtefactType.staticLib"
			name="AVR Cross Target Static Library" />
	</extension>


	<extension point="org.eclipse.cdt.managedbuilder.core.projectConverter">
	    <converter name="Update to AVR Eclipse 2.1"
	    	id="it.baeyens.avreclipse.converter.update"
			fromId="it.baeyens.avreclipse.project.winavr.elf"
	        toId="it.baeyens.avreclipse.project.winavr.elf_2.1.0" 
	        class="it.baeyens.avreclipse.mbs.converter.ProjectUpdateConverter"
	        mbsVersion="4.0.0">
	    </converter>
	    <converter name="Update to AVR Eclipse 2.1"
	    	id="it.baeyens.avreclipse.converter.update"
			fromId="it.baeyens.avreclipse.project.winavr.staticlib"
	        toId="it.baeyens.avreclipse.project.winavr.staticlib_2.1.0" 
	        class="it.baeyens.avreclipse.mbs.converter.ProjectUpdateConverter"
	        mbsVersion="4.0.0">
	    </converter>
	</extension>


</plugin>
